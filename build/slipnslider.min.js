!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function e(e){this.value=e}function t(t){function n(o,r){try{var s=t[o](r),a=s.value;a instanceof e?Promise.resolve(a.value).then(function(e){n("next",e)},function(e){n("throw",e)}):i(s.done?"return":"normal",s.value)}catch(e){i("throw",e)}}function i(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}(o=o.next)?n(o.key,o.arg):r=null}var o,r;this._invoke=function(e,t){return new Promise(function(i,s){var a={key:e,arg:t,resolve:i,reject:s,next:null};r?r=r.next=a:(o=r=a,n(e,t))})},"function"!=typeof t.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)}}();module.exports=function(t){var n={isEnabled:!1,optionableProperties:{isInfinite:!1,hasDotNav:!0,hasControls:!0,navContainer:t,dotsContainer:t,navText:["prev","next"],slideElement:"div",stageElement:"div",slidePadding:10,slidesPerPage:1,prevNavigationCallback:function(e){console.log("prev callback: going "+e)},nextNavigationCallback:function(e){console.log("next callback: going "+e)},responsive:{}},breakpoints:[],currentBreakpoint:0,options:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},slider:t,total:0,slideWidth:0,dotsCount:0,slideBy:0,activeSlideIndex:0,activeDotIndex:0,pressStart:"",pressEnd:"",pressMove:"",isTransitioning:!1,dotIsActive:"slipnslider__active",transitionEndPrefix:"",transitionPrefix:"",transformPrefix:"",curYPos:0,startpoint:0,isDragging:!1,dragThreshold:30,brokeHorizontalThreshold:!1,wasDragged:!1,isMobileDevice:!1,isAndroid:!1},i=function(){n.options=n.options||{};for(var t in n.optionableProperties)n.optionableProperties.hasOwnProperty(t)&&(void 0!==n.optionableProperties[t]&&e(n.optionableProperties[t])===e(n.options[t])?n[t]=n.options[t]:n[t]=n.optionableProperties[t])},o=function(){var e=window.innerWidth;for(var t in n.responsive)n.responsive.hasOwnProperty(t)&&(t=+t,n.breakpoints.push(t),t<e&&(n.currentBreakpoint=t));0!==n.breakpoints.length&&r()},r=function(){for(var t in n.responsive[n.currentBreakpoint])e(n.responsive[n.currentBreakpoint][t])===e(n[t])&&(n[t]=n.responsive[n.currentBreakpoint][t])},s=function(){if(n.isInfiniteOverride){for(var e=n.slidesPerPage+1,t=0;t<e;t++){var i=n.slides[t].cloneNode(!0);n.stage.appendChild(i)}for(var o=n.total-1,r=o;r>o-e;r--){var s=n.slides[o].cloneNode(!0);n.stage.insertBefore(s,n.slides[0])}if(n.total=n.slides.length,n.activeSlideIndex=n.slidesPerPage+1,n.slidesPerPage>1)for(var a=0,d=n.slidesPerPage-1;a<d;a++)n.dotNav.appendChild(document.createElement("li")),n.dotsCount++;n.navDots=n.dotNav.children,n.dotsCount=n.navDots.length}},a=function(){var e=document.createElement(n.stageElement);e.className="slipnslider__stage",n.slides=n.slider.children,n.total=n.slides.length;for(var t=0;t<n.total;t++)e.appendChild(n.slides[0]);n.slider.appendChild(e),n.stage=n.slider.children[0],n.slides=n.stage.children},d=function(){if(n.slidesPerPage>n.total&&(n.slidesPerPage=n.total),n.dotsCount=n.total-(n.slidesPerPage-1),n.dotsCount<=1)return n.hasDotNavOverride=!1,n.hasControlsOverride=!1,void(n.isInfiniteOverride=!1);n.hasDotNavOverride=n.hasDotNav,n.hasControlsOverride=n.hasControls,n.isInfiniteOverride=n.isInfinite},l=function(){var e=n.slider!==n.dotsContainer?document.querySelector(n.dotsContainer):n.dotsContainer;n.dotNav=document.createElement("ul"),n.dotNav.className="slipnslider__dot-nav";for(var t=0;t<n.dotsCount;t++)n.dotNav.appendChild(document.createElement("li"));n.navDots=n.dotNav.querySelectorAll("li"),n.activeDot=n.navDots[n.activeSlideIndex],n.activeDot.className=n.dotIsActive,e.appendChild(n.dotNav);var i=n.hasDotNavOverride?"":"none";n.dotNav.style.display=i},v=function(){if(!n.hasControlsOverride||1===n.total)return n;var e=n.slider!==n.navContainer?document.querySelector(n.navContainer):n.navContainer,t=document.createElement("div");t.className="slipnslider__controls",n.prevBtn=document.createElement("button"),n.prevBtn.className="slipnslider__prev",n.prevBtn.type="button",n.prevBtn.innerHTML=n.navText[0],n.nextBtn=document.createElement("button"),n.nextBtn.className="slipnslider__next",n.nextBtn.type="button",n.nextBtn.innerHTML=n.navText[1],t.appendChild(n.prevBtn),t.appendChild(n.nextBtn),e.appendChild(t)},c=function(){if(!(n.isEnabled||(n.isEnabled=!0,window.addEventListener("resize",g,!1),n.dotsCount<=1))){if(n.hasControlsOverride&&(n.nextBtn.addEventListener("click",H,!1),n.prevBtn.addEventListener("click",Y,!1)),n.hasDotNavOverride)for(var e=0,t=n.navDots.length;e<t;e++)n.navDots[e].addEventListener("click",P,!1);n.stage.addEventListener(n.pressStart,y,!1),n.stage.addEventListener("click",p,!1),window.addEventListener(n.pressMove,k,!1),window.addEventListener(n.pressEnd,D,!1),n.isMobileDevice||window.addEventListener("keydown",b,!1)}},f=function(){if(n.isEnabled){if(n.isEnabled=!1,n.hasControlsOverride&&(n.nextBtn.removeEventListener("click",H,!1),n.prevBtn.removeEventListener("click",Y,!1)),n.hasDotNavOverride)for(var e=0,t=n.navDots.length;e<t;e++)n.navDots[e].removeEventListener("click",P,!1);n.stage.removeEventListener(n.pressStart,y,!1),n.stage.removeEventListener("click",p,!1),window.removeEventListener(n.pressMove,k,!1),window.removeEventListener(n.pressEnd,D,!1),window.removeEventListener("resize",g,!1),n.isMobileDevice||window.removeEventListener("keydown",b,!1),u()}},u=function(){if(n.hasControlsOverride&&n.prevBtn.parentElement.parentElement.removeChild(n.prevBtn.parentElement),n.dotNav.parentElement.removeChild(n.dotNav),n.isInfiniteOverride){for(var e=n.slidesPerPage+1,t=n.total-1,i=n.total-1-e;t>i;t--)n.stage.removeChild(n.slides[t]);for(var o=0;o<e;o++)n.stage.removeChild(n.slides[0]);n.total-=2*e}for(var r=0;r<n.total;r++)n.slides[0].style.width="100%",n.slides[0].style.marginLeft="0",n.slider.appendChild(n.slides[0]);n.slider.removeChild(n.stage),n.slider.display="none"},p=function(e){n.wasDragged&&e.preventDefault(),n.wasDragged=!1},g=function(e){if(m(),0!==n.breakpoints.length){var t=n.breakpoints.indexOf(n.currentBreakpoint),i=window.innerWidth;i>=n.breakpoints[t+1]?(n.currentBreakpoint=n.breakpoints[t+1],h()):t>0&&i<n.breakpoints[t]&&(n.currentBreakpoint=n.breakpoints[t-1],h())}},h=function(){n.activeSlideIndex=n.activeDotIndex=0,f(),r(),a(),d(),l(),v(),s(),m(),C(),O(),I(),c()},m=function(){N();var e=(n.total-1)*n.slidePadding;n.slideWidth=Math.ceil((n.slider.offsetWidth-n.slidePadding*(n.slidesPerPage-1))/n.slidesPerPage);var t=n.total*n.slideWidth+e;n.stage.style.width=t+"px",n.dragThreshold=n.slider.offsetWidth/4,n.slideBy=n.slideWidth+n.slidePadding;for(var i=0,o=n.slides.length;i<o;i++)n.slides[i].style.width=n.slideWidth+"px",n.slides[i].style.marginLeft=n.slidePadding+"px";C(),O()},x=function(e,t){n.isTransitioning||(E(),e?n.nextNavigationCallback(e):n.prevNavigationCallback(e),e&&M()?(n.activeDotIndex=0,n.isInfiniteOverride?n.activeSlideIndex++:n.activeSlideIndex=0):!e&&B()?(n.activeDotIndex=n.dotsCount-1,n.isInfiniteOverride?n.activeSlideIndex--:n.activeSlideIndex=n.dotsCount-1):e?(n.activeSlideIndex++,n.activeDotIndex++):(n.activeSlideIndex--,n.activeDotIndex--),C())},b=function(e){"body"===e.srcElement.localName&&(37===event.keyCode?x(!1):39===e.keyCode&&x(!0))},P=function(e){if(e.preventDefault(),!n.isTransitioning){var t=Array.prototype.indexOf.call(n.navDots,e.currentTarget);t!==n.activeDotIndex&&(E(),n.activeDotIndex=n.activeSlideIndex=t,n.isInfiniteOverride&&(n.activeSlideIndex+=n.slidesPerPage+1),C())}},y=function(e){if(!n.isTransitioning){N(),n.isDragging=!0;var t=n.isAndroid?e.touches[0]:e;n.isMobileDevice&&(n.brokeHorizontalThreshold=!1,n.curYPos=t.pageY),n.startpoint=t.pageX}},k=function(e){if(!n.isTransitioning&&n.isDragging){var t=n.isAndroid?e.changedTouches[0]:e;if(n.wasDragged=!0,n.isMobileDevice){var i=Math.abs(n.curYPos-t.pageY),o=Math.abs(n.startpoint-t.pageX);if(o>20&&(n.brokeHorizontalThreshold=!0,e.preventDefault()),!n.brokeHorizontalThreshold&&o<=20&&i>=10&&i>o)return n.isDragging=!1,n.stage.style[n.transitionPrefix]="all .75s",void C()}var r=-1*(n.activeSlideIndex*n.slideWidth+n.slidePadding*n.activeSlideIndex)-.7*(n.startpoint-t.pageX);n.isInfiniteOverride||(r>=n.slider.offsetWidth/4?r=n.slider.offsetWidth/4:r<=-n.stage.offsetWidth+.75*n.slider.offsetWidth&&(r=-n.stage.offsetWidth+.75*n.slider.offsetWidth)),n.stage.style[n.transformPrefix]="translate3d("+r+"px, 0, 0)"}},D=function(e){if(n.isDragging){n.isDragging=!1,n.stage.style[n.transitionPrefix]="all .75s";var t=n.isAndroid?e.changedTouches[0]:e,i=void 0!==e?n.startpoint-t.pageX:0;Math.abs(i)>=n.dragThreshold?n.isInfiniteOverride?x(i>0):i<0&&!B()?x(!1):i>0&&!M()?x(!0):C():C()}},E=function(){n.isTransitioning=!0},w=function(){n.isTransitioning=!1,n.isInfiniteOverride&&S()},I=function(e){n.transitionEndPrefix&&n.stage.addEventListener(n.transitionEndPrefix,function(e,t){t&&t(),w()},!1)},C=function(){var e=n.activeSlideIndex*n.slideBy;n.stage.style[n.transformPrefix]="translate3d(-"+e+"px,0,0)",n.hasDotNavOverride&&(n.activeDot.className="",n.activeDot=n.navDots[n.activeDotIndex],n.activeDot.className=n.dotIsActive)},S=function(){n.activeDotIndex>0&&n.activeSlideIndex<=n.slidesPerPage?T(!0):0===n.activeDotIndex&&n.activeSlideIndex>=n.total-n.slidesPerPage-1&&T(!1)},T=function(e){var t=n.slidesPerPage+1;n.activeSlideIndex=e?n.total-t-1:t,N(),C(),O()},N=function(){n.stage.style[n.transitionPrefix]="all 0s"},O=function(){setTimeout(function(){n.stage.style[n.transitionPrefix]="all .75s"},1)},B=function(){return 0===n.activeDotIndex},M=function(){return n.activeDotIndex===n.dotsCount-1},L=function(){var e=void 0,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]},W=function(){var e=void 0,t=document.createElement("fakeelement"),n={transition:"transition",OTransition:"oTransition",MozTransition:"transition",WebkitTransition:"webkitTransition"};for(e in n)if(void 0!==t.style[e])return n[e]},_=function(){var e=void 0,t=document.createElement("fakeelement"),n={transform:"transform",OTransform:"oTransform",MozTransform:"mozTransform",WebkitTransform:"webkitTransform"};for(e in n)if(void 0!==t.style[e])return n[e]},A=function(){var e=void 0,t=void 0,i=void 0;"ontouchstart"in window?(e="touchstart",t="touchend",i="touchmove",n.isMobileDevice=!0,navigator.userAgent.match(/Android/i)&&(n.isAndroid=!0)):window.PointerEvent?(e="pointerdown",t="pointerup",i="pointermove"):window.MSPointerEvent?(e="MSPointerDown",t="MSPointerUp",i="MSPointerMove"):(e="mousedown",t="mouseup",i="mousemove"),n.pressStart=e,n.pressEnd=t,n.pressMove=i},z=function(){n.transitionEndPrefix=L(),n.transitionPrefix=W(),n.transformPrefix=_()},H=x.bind(null,!0),Y=x.bind(null,!1);return{init:function(){n.slider?(console.time("init"),z(),A(),i(),o(),a(),d(),l(),v(),s(),m(),C(),O(),I(),c(),console.timeEnd("init")):console.warn("Slider element is not found or parameter is missing.\nSlipnSlider initialization aborted.")},enable:c,disable:f}}});